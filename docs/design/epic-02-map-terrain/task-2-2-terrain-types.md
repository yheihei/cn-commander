# [task-2-2] 地形タイプ定義と描画

## 概要
- エピック: #2
- タスク: #2-2
- 関連PR/要件: 平地、森林、山地の3種類の地形タイプ定義と描画実装

## 設計方針

### 地形タイプの選定理由
- **シンプルさ優先**: 初期実装として3種類に限定（平地、森林、山地）
- **戦術的多様性**: 各地形が異なる戦術的価値を持つ
- **視覚的差別化**: プレイヤーが一目で地形を識別可能

### アセット管理方針
- **タイルセット方式**: 個別画像ではなくタイルセットを使用
- **16x16ピクセル**: レトロゲーム風の統一されたタイルサイズ
- **複数バリエーション**: 同一地形でも複数の見た目を用意

## 地形タイプ詳細

### 地形タイプの定義

#### 基本の3地形
- **平地（PLAIN）**: 基本的な地形、補正なし
- **森林（FOREST）**: 防御力が上がるが、移動・視界に制限
- **山地（MOUNTAIN）**: 最も防御力が高く、視界も良好だが移動が困難

#### 地形効果の設計

| 地形 | 移動コスト | 防御補正 | 攻撃補正 | 視界補正 |
|-------|-------------|----------|----------|----------|
| 平地  | 1.0         | +0%      | +0%      | ±0マス   |
| 森林  | 1.5         | +20%     | -10%     | -2マス   |
| 山地  | 2.0         | +30%     | +15%     | +3マス   |

### 戦術的意味
- **平地**: 高速移動と機動戦に適する
- **森林**: 待ち伏せや防御戦に有利
- **山地**: 拠点防衛や遠距離攻撃に優れる

### アセット管理

#### タイルセット構成
- **基本方針**: 地形ごとにタイルセットを分離
- **ファイル構成**:
  - 平地用基本タイルセット
  - 森林専用タイルセット
  - 山地用タイルセット（高低バリエーションあり）

#### タイルバリエーション
- **平地**: 草原、土、石畳の3種類
- **森林**: 通常の森、深い森の2種類
- **山地**: 低・中・高の3段階

### 描画設計

#### 描画方針
- 地形タイプに応じて適切なテクスチャとフレームを選択
- 同一地形でもバリエーションを持たせ、単調さを回避
- 16x16ピクセルの統一サイズで描画

## インターフェース定義

### 地形情報の取得
- **getTileType()**: タイルの地形タイプを返す
- **getTerrainEffect()**: 地形効果（移動コスト、補正値等）を返す
- **isWalkable()**: タイルが通行可能かを判定

### 地形効果の適用（他システムとの連携）
- **移動システム**: movementCostを参照して移動速度を計算
- **戦闘システム**: defenseBonusとattackBonusを戦闘計算に適用
- **視界システム**: visionModifierを視界範囲計算に使用

## テスト方針

### 地形タイプテスト
1. **タイプ設定の確認**
   - 各地形タイプが正しく設定されるか
   - タイルから正しい地形効果を取得できるか

2. **描画の確認**
   - 適切なテクスチャとフレームが選択されるか
   - タイルサイズが正しく設定されるか

3. **効果値の一貫性**
   - 同一地形タイプで効果値が一致するか
   - 効果値が要求仕様と一致するか

## 未解決事項
- [ ] 地形のアニメーション対応（水面の波など）
- [ ] 季節変化への対応（冬の雪景色など）
- [ ] 地形タイプの追加（河川、道路、橋など）
- [ ] 地形の組み合わせ効果（森林＋山地など）
- [ ] タイルのバリエーション自動選択（同じ森でも見た目を変える）
