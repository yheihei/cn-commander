# [task-2-4] カメラシステム

## 概要
- エピック: #2
- タスク: #2-4
- 関連PR/要件: スクロール機能と20×20マス固定表示の実装

## 設計方針

### 固定ズーム方式の採用理由
- **統一された戦術視界**: 全プレイヤーが同じ視界範囲でプレイ
- **UI設計の簡素化**: 固定サイズを前提としたUI配置が可能
- **パフォーマンス安定化**: 描画範囲が一定のため処理負荷が予測可能

### 20×20マス表示の根拠
- **戦術的視界**: 軍団の視界範囲（8-12マス）を考慮した適切なサイズ
- **操作性**: 1画面で状況を把握しつつ、詳細も確認できるバランス
- **画面解像度**: 1280×720の画面に最適化

## カメラシステム詳細

### ズーム値の計算根拠

#### 仕様からの要求
- 画面解像度: 1280×720ピクセル
- タイルサイズ: 16×16ピクセル
- 表示目標: 20×20マス

#### ズーム値の決定
- 表示したい範囲: 20タイル × 16ピクセル = 320ピクセル
- 画面サイズに合わせたズーム率を計算
- **固定ズーム値: 2.25**（縦方向基準でアスペクト比を保持）

### カメラ設定

#### 初期設定方針
- カメラの移動可能範囲をマップ全体に設定
- ズーム値を2.25に固定
- プレイヤー開始位置を中心に表示

#### スクロール機能

##### キーボードスクロール
- 矢印キーで上下左右にスクロール
- スクロール速度: 5ピクセル/フレーム
- マップ境界で自動的に停止

##### マウスドラッグスクロール
- 右クリックでドラッグ開始
- ドラッグ中のマウス移動に追従してスクロール
- リアルタイムでマップを探索可能

### 座標変換システム

#### 座標系の変換
- **スクリーン座標**: 画面上のマウス位置
- **ワールド座標**: カメラとズームを考慮したゲーム内座標
- **グリッド座標**: タイル単位の論理座標

変換フロー: スクリーン座標 → ワールド座標 → グリッド座標

## インターフェース定義

### カメラ操作
- **矢印キー**: 上下左右スクロール（5px/フレーム）
- **右クリックドラッグ**: ドラッグによるスクロール
- **初期位置**: プレイヤー開始位置を中心に表示

### 削除された機能
- ズームイン/アウト（マウスホイール、Q/Eキー）
- ダイナミックズーム調整

### 他システムとの連携
- **MapManager**: マップサイズに基づいてカメラ境界を設定
- **UISystem（未実装）**: 画面固定のUI要素はscrollFactor(0)で設定
- **UnitSystem（未実装）**: ユニット選択時の自動カメラ移動

## テスト方針

### カメラシステムのテスト
1. **初期設定の確認**
   - ズーム値が2.25で固定されているか
   - カメラ境界がマップサイズと一致するか

2. **スクロール機能**
   - キーボードスクロールが正しく動作するか
   - マウスドラッグスクロールが正しく動作するか
   - マップ境界でスクロールが停止するか

3. **表示範囲の確認**
   - 20×20マスが画面に収まっているか
   - アスペクト比の違う画面でも適切に表示されるか

4. **パフォーマンステスト**
   - スクロール時のフレームレート維持
   - 大規模マップでの動作確認

## 未解決事項
- [ ] エッジスクロール: 画面端でのマウススクロール
- [ ] スムーズスクロール: 慣性を持ったスクロール動作
- [ ] カメラショートカット: 特定位置へのクイック移動
- [ ] ミニマップ連携: ミニマップクリックでのカメラ移動
- [ ] 自動追従: 選択ユニットの自動追跡モード
- [ ] マルチ解像度対応: 異なる画面サイズでの最適化

## 変更履歴
- ズーム機能を削除し、20×20マス固定表示に変更（f3bc1f6）