# カメラ固定表示システム 基本設計書

作成日: 2025/07/12  
タスク: ズーム機能削除と20×20マス固定表示の実装

## 概要

ゲームのカメラシステムからズーム機能を削除し、常に20×20マスが画面に収まる固定表示を実装しました。これにより、プレイヤーは一定の視界範囲でゲームをプレイすることになります。

## 設計方針

### 1. ズーム機能の削除
- マウスホイールによるズーム操作を無効化
- Q/Eキーによるズーム操作を無効化
- ユーザーはズーム値を変更できない

### 2. 固定表示の計算

#### 画面とタイルの仕様
- **画面解像度**: 1280×720ピクセル（16:9）
- **タイルサイズ**: 16×16ピクセル
- **表示目標**: 20×20マス

#### ズーム値の計算
```
表示したい範囲: 20タイル × 16ピクセル = 320ピクセル（縦横とも）

横方向のズーム: 1280 ÷ 320 = 4.0
縦方向のズーム: 720 ÷ 320 = 2.25

固定ズーム値 = min(4.0, 2.25) = 2.25
```

縦横両方で20マスを確実に表示するため、小さい方のズーム値を採用しました。

## 実装詳細

### GameScene.ts の変更

1. **初期ズーム設定の変更**
   ```typescript
   // カメラのズームを設定（20x20マスが画面に収まるように）
   // 画面サイズ1280x720で、20マス×16px=320pxを表示
   // zoom = min(1280/320, 720/320) = 2.25
   this.cameras.main.setZoom(2.25);
   ```

2. **ズーム操作の削除**
   - キーボード（Q/E）のイベントハンドラを削除
   - マウスホイールのイベントハンドラを削除

3. **デバッグ表示の更新**
   - ズーム値の表示を削除

## 操作方法

### 残された操作
- **矢印キー**: カメラを上下左右に移動
- **右クリックドラッグ**: カメラをドラッグ移動
- **Dキー**: デバッグ情報の表示/非表示

### 削除された操作
- ~~マウスホイール: ズームイン/アウト~~
- ~~Qキー: ズームアウト~~
- ~~Eキー: ズームイン~~

## 技術的考慮事項

1. **パフォーマンス**: 固定ズームにより、描画範囲が一定になるため、パフォーマンスが安定
2. **UI設計**: 20×20マスの固定表示を前提としたUI配置が可能
3. **マップサイズ**: 512×512の大規模マップでは、全体の約1.5%のみが表示される

## 今後の拡張ポイント

1. **ミニマップ**: 大規模マップでの位置把握のため
2. **クイック移動**: 特定の拠点へのショートカット機能
3. **エッジスクロール**: 画面端でのマウスによるスクロール

## 影響範囲

- カメラ操作の学習コストが削減
- 戦術的な視界範囲が統一される
- 大規模マップでの全体把握が困難になる可能性