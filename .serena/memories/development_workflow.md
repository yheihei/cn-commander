# 開発ワークフロー

## タスク遂行の基本フロー

適用条件: 実装を依頼された時

### Phase1: Plan（計画）
1. **情報確認**
   - 受け取った情報を確認し、不明点を洗い出す
   - `@docs/epics/epic.md`を読み、該当タスクを特定

2. **設計書作成**
   - 基本設計書を出力
   - ルール: `@.claude/rules/design-doc.md`に従う
   - 保存先: `docs/design/epic-XX-name/task-X-Y-*.md`

3. **関連設計書確認**
   - `docs/design/epic-*`配下の関連設計書を確認
   - 必要に応じて既存設計書も更新

### Phase2: Imp（実装）
1. **実装作業**
   - Planに基づいて実装
   - 既存コードのスタイルに合わせる
   - マネージャーパターンに従う

2. **素材確認**
   - スプライトシート等が必要な場合はユーザーに確認
   - アセットは`assets/`ディレクトリに配置

### Phase3: Debug（デバッグ）
1. **テスト実行**
   - 指定テストがあれば実行
   - なければ関連テストを探して実行
   - テストがなければ統合テスト作成
   - ルール: `@.claude/rules/integration-test.md`

2. **コード品質チェック**
   ```bash
   npm run format
   npm run lint
   npm run typecheck
   ```

3. **エラー修正**
   - エラーがあればPhase2に戻って修正

### Phase4: Review（レビュー）
1. **要求確認**
   - `@docs/prd/requirements.md`との整合性確認
   - 要求違反があれば修正またはユーザー確認

2. **自己レビュー**
   - YAGNI/KISS原則の遵守
   - コードスタイルの統一性
   - UIパターンの適切な使用

3. **修正対応**
   - 指摘事項があればPhase2に戻る

### Phase5: Doc（ドキュメント）
1. **設計書更新**
   - 実装内容に合わせて設計書を更新
   - `docs/design/epic-XX-name/`配下

2. **PRD更新**
   - 必要に応じて`docs/prd/requirements.md`を更新

3. **フィードバック待機**
   - ユーザーからのフィードバックに応じて適切なフェーズに戻る

## 重要な注意事項

### 必須確認（MUST）
実装を1行でも修正した場合:
```bash
npm test  # テストエラーがないことを確認
```

### UI実装時の注意
- cam.worldViewを使用して配置
- setScrollFactor(0)は使用禁止
- update()メソッドで位置更新

### git操作
- `gh`コマンドを優先使用
- コミットメッセージは日本語で明確に

### 応答ルール
- 常に日本語で応答（コード部分は除く）
- 思考は英語で行う